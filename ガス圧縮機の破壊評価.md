# 4.5 ガス圧縮機に付設された緩衝器の破壊評価の例題
## K-2-b-2による評価
インスタンスの生成
```python
from FFSeval import FFS as ffs
cls=ffs.Treat()
K=cls.Set('K-2-b-2')
```
入力データの準備
```python
data={
    'Ro':291,
    'Ri':275,
    't':16,
    'p':8,
    'a':0.8}
```
試計算
```python
K.SetData(data)
K.Calc()
res=K.GetRes()
res
#{'K': np.float64(264.57512533028677)}
```
単位の変換
```python
from UnitCvrt import UnitConv as uc
unit=uc.Convert()
sif=unit.SetUnit('Sif')
sif.ShowDict()
sif.Conv('N/mm^3/2','MPa_m^1/2',264)
```
この結果，以下を得る。
```
8.348413022844522
```
テキストと一致している。なお，UnitCvrtは単位変換のために酒井が開発したモジュールであり，詳細については[URL](https://pypi.org/project/UnitCvrt/)を参照のこと。亀裂長を変化させたときの応力拡大係数変化は以下により得られる。a=11mmに対する解をKeに代入しておく。
```python
aa=[0.8,2,4,6,8,10,11,12.8]
KK=[]
for a in aa:
    data['a']=a
    K.SetData(data)
    K.Calc()
    res=K.GetRes()
    v=res['K']
    Kval=sif.Conv('N/mm^3/2','MPa_m^1/2',v)
    KK.append(Kval)
data['a']=11
K.SetData(data)
K.Calc()
res=K.GetRes()
v=res['K']
Ke=sif.Conv('N/mm^3/2','MPa_m^1/2',v)
KK
```
この結果，以下が得られ，P413の表と一致している。
```
[np.float64(8.36660008268215),
 np.float64(14.195520519369468),
 np.float64(25.02275594117598),
 np.float64(41.01874333432976),
 np.float64(64.79564044890431),
 np.float64(98.77275823993354),
 np.float64(120.39510781882831),
 np.float64(168.55379804605536)]
 ```
 4箇所のシャルピー衝撃値CvからRolfe Barsomの式により破壊靭性値K1cを計算し，Krを計算する。
 ```python
 Cv=[47.5,52.0,66.1,70]
Sy=514
K1c=K.RolfeBarsom(Cv,Sy)
Kr=Ke/K1c
Kr
```
この結果，以下が得られ，P410に書かれている値に一致していることが確認できる。
```
array([1.0125174 , 0.96278611, 0.84434211, 0.81860509])
```
## K-2-a-3による評価
```python
aa=[0.8,1,2,3,4,5,6,7,8,9,10,11,12,13,13.6]
K=cls.Set('K-2-a-3')
KK=[]
for a in aa:
    c=a*3
    data['a']=a
    data['c']=c
    K.SetData(data)
    K.Calc()
    res=K.GetRes()
    v=res['KA']
    Kval=sif.Conv('N/mm^3/2','MPa_m^1/2',v)
    KK.append(Kval) 
KK
```
この結果，以下が得られ，P415の結果と一致していることが確認できる。
```
[np.float64(9.323604035833702),
 np.float64(9.680751522643458),
 np.float64(11.530068379487746),
 np.float64(13.485350940991223),
 np.float64(15.546599207153895),
 np.float64(17.713813177975748),
 np.float64(19.98699285345679),
 np.float64(22.366138233597027),
 np.float64(24.85124931839646),
 np.float64(27.442326107855074),
 np.float64(30.13936860197288),
 np.float64(32.94237680074987),
 np.float64(35.85135070418605),
 np.float64(38.866290312281436),
 np.float64(40.726117615375074)]
 ```

 ## K-2-e-2による評価
 ```python
 cc=[10,20,30,40,50,100,160,200,336]
K=cls.Set('K-2-e-2')
data['R']=(data['Ro']+data['Ri'])/2.0
KK=[]
for c in cc:
    data['c']=c/2.0
    K.SetData(data)
    K.Calc()
    res=K.GetRes()
    v=res['K']
    Kval=sif.Conv('N/mm^3/2','MPa_m^1/2',v)
    KK.append(Kval)
KK 
```
この結果，以下が得られ，P416と一致していることが確認できる。最終行のみ値が異なっているが，テキストが誤りと推察される。
```
[np.float64(17.891696114090017),
 np.float64(25.690791241783586),
 np.float64(32.12655479324278),
 np.float64(38.05833165855978),
 np.float64(43.8276226965065),
 np.float64(74.4503991681435),
 np.float64(119.34845682844305),
 np.float64(154.28625579544536),
 np.float64(293.67019289866226)]
 ```

 ## 塑性崩壊圧力の計算

 ```python
 data['Sy']=514
aa=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
L=cls.Set('L-2-b')
pc=[]
LLr=[]
for a in aa:
    data['a']=a
    L.SetData(data)
    L.Calc()
    res=L.GetRes()
    v=res['pc']
    l=res['Lr']
    pc.append(v)
    LLr.append(l)
data['a']=11
L.SetData(data)
L.Calc()
res=L.GetRes()
Lr=res['Lr']
pc,LLr
```
この結果P417に掲載されている表と一致していることが確認できる。なお，テキストの表の「係数」はLrのことだとすると，誤りと思われる。
```
([np.float64(32.256308517768225),
  np.float64(29.997202433852326),
  np.float64(27.75434891169122),
  np.float64(25.527573192556357),
  np.float64(23.31670301427246),
  np.float64(21.121568566794856),
  np.float64(18.94200244873198),
  np.float64(16.777839624789692),
  np.float64(14.628917384114603),
  np.float64(12.49507529951443),
  np.float64(10.376155187533834),
  np.float64(8.272001069364952),
  np.float64(6.182459132572243),
  np.float64(4.107377693612009),
  np.float64(2.0466071611273637)],
 [np.float64(0.2480135008503295),
  np.float64(0.2666915362404553),
  np.float64(0.2882431155367542),
  np.float64(0.3133866247157696),
  np.float64(0.3431016810182424),
  np.float64(0.37875974858120964),
  np.float64(0.42234183115816976),
  np.float64(0.47681943437936986),
  np.float64(0.5468620670923414),
  np.float64(0.6402522440429701),
  np.float64(0.7709984917738504),
  np.float64(0.9671178633701707),
  np.float64(1.2939834826973713),
  np.float64(1.9477147213517723),
  np.float64(3.9089084373149747)])
  ```

  ## 安全裕度の評価
```python
  margin=[]
for i in range(4):
    margin.append(L.Margin(Kr[i],Lr))
margin
```
この結果，以下が得られ，4個の評価点が，図4.5.3の4点に対応していることが確認できる。
```
[{'L0': np.float64(0.6808140969749357),
  'K0': np.float64(0.8940823174289826),
  'margin': np.float64(1.1324655220854434)},
 {'L0': np.float64(0.7050475820291051),
  'K0': np.float64(0.8804297650401394),
  'margin': np.float64(1.093541076412092)},
 {'L0': np.float64(0.7659604582023872),
  'K0': np.float64(0.8388248214366959),
  'margin': np.float64(1.0065774068589417)},
 {'L0': np.float64(0.779713684825193),
  'K0': np.float64(0.8278584177419028),
  'margin': np.float64(0.9888225726686799)}]
  ```


